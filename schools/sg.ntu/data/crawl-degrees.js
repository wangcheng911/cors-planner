var page=require("webpage").create(),fs=require("fs");page.onConsoleMessage=function(e){console.log(e)},console.log("\n************* CORS PLANNER **************"),console.log("*** Crawl NTU Degrees Provided ***"),console.log("*****************************************\n");var url="http://wish.wis.ntu.edu.sg/webexe/owa/aus_schedule.main",output="degrees.js",timeStart=new Date;page.open(encodeURI(url),function(e){function r(e,t){console.log("===> Output to file ["+e+"]"),fs.write(e,"exports.degrees="+JSON.stringify(t),"w"),console.log("===> Output Completed")}if(e!=="success")console.log("===! Unable to access network\n");else{console.log("===> Page Loaded");var t=page.evaluate(function(){var e=document.getElementsByTagName("option"),t,n,r=[];console.log("===> Options "+e.length);for(t=0;n=e[t];t++)n.textContent&&n.value&&n.value.match(/(?:[A-Z0-9]*;){3}[A-Z0-9]*/)&&r.push(n.value);return console.log("===> Found "+r.length+" Degrees"),r});r(output,t);var n=new Date-timeStart;console.log("Spent "+(n/1e3).toFixed(2)+"s")}phantom.exit()});