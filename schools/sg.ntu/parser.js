define(["require","exports","module"],function(e,t){function u(e){return e&&e.query&&e.query.results&&e.query.results.table?!0:!1}function a(e){return e.query.count!==2}function f(e){return!/No Courses found/i.test(JSON.stringify(e))}function l(e){var t=e[0].td,r=0,o;n.correctAsAt=(new Date).toDateString(),n.description="-",n.examinable="-",n.examDate="-",n.preclusion="-",n.workload="-",n.prerequisite="";for(o in s)s.hasOwnProperty(o)&&(n[o]=s[o](t[r++]));for(r=1,o=e.length;r<o;r++)n.prerequisite+=i(e[r].td[1])||" "}function c(e){var t=n.lessons[r],s,u,a,f,l,c=e.length;for(a=1;a<c;a++)l=e[a].td,s=l[0]&&l[0].b?i(l[0]):s,t[s]||(t[s]=[]),u={},u.parent=r,u.index=s,u.type=i(l[1]),u.classNo="#"+s+" "+i(l[2]),u.weekDay=o[i(l[3])],f=i(l[4]).split("-"),u.startTime=f[0],u.endTime=f[1],u.room=i(l[5]),u.weekType=l[6]?i(l[6]):"ALL",t[s].push(u)}var n,r="group",i=function(e){var t=e.strong||e.b;return t?t.font?t.font.content||t.font:t:"-"},s={code:i,title:i,credits:i},o={MON:"MONDAY",TUE:"TUESDAY",WED:"WEDNESDAY",THU:"THURSDAY",FRI:"FRIDAY",SAT:"SATURDAY"};t.tryParse=function(e){return u(e)&&f(e.query.results.table[1].tr[1])},t.parse=function(e){if(!u(e))return null;var t=e.query.results.table;return n={},n.url=e.url,f(t)?(n.isAvailable=!0,l(t[0].tbody.tr),n.lessons={},n.lessons[r]={},c(t[1].tbody.tr)):n.isAvailable=!1,n}});