define(["require","exports","module","util/store","util/helper"],function(e,t){function o(){$("#semester").text("Year "+r.acadYear+" SEM"+r.semester)}function u(){$("#term-ctrls").tooltip({placement:"bottom",selector:"li[rel=tooltip]"}),$("#term-clear").on("click",function(){$.publish("module:clean")}),$("#term-share").on("click",function(){$.publish("module:share")}),$("#term-undo").on("click",function(){$.publish("undo:pop")}),$.subscribe("undo:title",function(e,t){$("#term-undo").attr("data-original-title",t)})}function a(){i.typeahead({source:[],items:59,updater:c}),planner.school&&f(),$.subscribe("app:school",f)}function f(){var t=planner.school+"-module-data",r=n.get(t);e(["school/"+planner.school+"/info"],function(s){r&&r.lastUpdate===s.lastUpdate?i.data("typeahead").source=r.data:e(["school/"+planner.school+"/data/list"],function(e){n.set(t,{lastUpdate:s.lastUpdate,data:e}),i.data("typeahead").source=e})})}function l(){i.on("focus",function(e){this.select()}),s.on("click",function(e){e.preventDefault(),c(i.val())})}function c(e){e=e.split(" ")[0],e&&/^[a-z]{2,4}\d{3,4}[a-z]{0,2}$/i.test(e)?(i.val(""),$.publish("module:add",[e.toUpperCase()])):$.publish("message:error",["The Module Code '"+e.toUpperCase()+"' is not Valid!"])}var n=e("util/store"),r=e("util/helper").Semester,i=$("#mod-code"),s=$("#add-btn");t.init=function(){o(),a(),l(),u()},$.subscribe("app:window:resize",function(){var e=$("#add-module").width();$("#add-module").find("#mod-code").width(e-84)})});